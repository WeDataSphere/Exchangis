"use strict";(self["webpackChunk_fesjs_template"]=self["webpackChunk_fesjs_template"]||[]).push([[246],{79246:(e,a,t)=>{t.r(a),t.d(a,{default:()=>A});t(66992),t(33948),t(74916),t(23123);var r=t(1089),s=t(91706),o=t(56485),n=e=>((0,r.dD)("data-v-16adcdf2"),e=e(),(0,r.Cn)(),e),l={class:"data-source-warp"},c={class:"ds-r"},u={style:{"margin-right":"8px",color:"rgba(0, 0, 0, 0.45)"}},i=n((()=>(0,r._)("span",null,"数据源",-1))),d={class:"main-content"},p={class:"data-source-warp-l"},f={class:"data-source-warp-l-content"},y=n((()=>(0,r._)("div",{class:"data-source-warp-mid"},[(0,r._)("span",{class:"iconfont icon-jiantou",style:{color:"#99b0d0","font-size":"24px"}})],-1))),b={class:"data-source-warp-r"},v={class:"data-source-warp-r-content"};function m(e,a,t,n,m,S){var k=(0,r.up)("RightOutlined"),g=(0,r.up)("DownOutlined"),w=(0,r.up)("SelectDataSource"),O=(0,r.up)("a-form-item"),h=(0,r.up)("dync-render"),I=(0,r.up)("a-form");return(0,r.wg)(),(0,r.iD)("div",l,[(0,r._)("div",c,[(0,r._)("div",{class:"main-header",onClick:a[0]||(a[0]=function(){return e.showInfo&&e.showInfo(...arguments)})},[(0,r._)("span",u,[e.isFold?((0,r.wg)(),(0,r.j4)(g,{key:1})):((0,r.wg)(),(0,r.j4)(k,{key:0}))]),i]),(0,r.wy)((0,r._)("div",d,[(0,r._)("div",p,[(0,r._)("div",f,[(0,r.Wm)(I,{ref:"formRef","label-col":e.labelCol,"wrapper-col":e.wrapperCol},{default:(0,r.w5)((()=>[(0,r.Wm)(O,{name:"dsInfo"},{default:(0,r.w5)((()=>[(0,r.Wm)(w,{onUpdateDsInfo:e.updateSourceInfo,title:e.sourceTitle},null,8,["onUpdateDsInfo","title"])])),_:1}),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.dataSource.params.sources,(a=>((0,r.wg)(),(0,r.j4)(O,{key:a.field,label:a.label,name:a.label,help:e.sourcesHelpMsg[a.key.split(".").pop()],"validate-status":e.sourcesHelpStatus[a.key.split(".").pop()],required:a.required},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{param:a,onUpdateInfo:e.updateSourceParams,style:(0,s.j5)(e.styleObject),data:e.dataSource.dataSourceIds.source},null,8,["param","onUpdateInfo","style","data"])])),_:2},1032,["label","name","help","validate-status","required"])))),128))])),_:1},8,["label-col","wrapper-col"])])]),y,(0,r._)("div",b,[(0,r._)("div",v,["请点击后选择"!==e.sourceTitle?((0,r.wg)(),(0,r.j4)(I,{key:0,ref:"formRef","label-col":e.labelCol,"wrapper-col":e.wrapperCol},{default:(0,r.w5)((()=>[(0,r.Wm)(O,{name:"dsInfo2"},{default:(0,r.w5)((()=>[(0,r.Wm)(w,{onUpdateDsInfo:e.updateSinkInfo,title:e.sinkTitle,style:(0,s.j5)(e.styleObject)},null,8,["onUpdateDsInfo","title","style"])])),_:1}),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.dataSource.params.sinks,(a=>((0,r.wg)(),(0,r.j4)(O,{key:a.field,label:a.label,name:a.label,help:e.sinksHelpMsg[a.key.split(".").pop()],"validate-status":e.sinksHelpStatus[a.key.split(".").pop()],required:a.required},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{param:a,onUpdateInfo:e.updateSinkParams,style:(0,s.j5)(e.styleObject),data:e.dataSource.dataSourceIds.sink},null,8,["param","onUpdateInfo","style","data"])])),_:2},1032,["label","name","help","validate-status","required"])))),128))])),_:1},8,["label-col","wrapper-col"])):(0,r.kq)("",!0)])])],512),[[o.vShow,e.isFold]])])])}t(82526),t(57327),t(49337),t(86778);var S=t(25318),k=t(4942),g=(t(41539),t(88674),t(54747),t(47042),t(24603),t(39714),t(92222),{icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M666.7 505.5l-246-178A8 8 0 00408 334v46.9c0 10.2 4.9 19.9 13.2 25.9L566.6 512 421.2 617.2c-8.3 6-13.2 15.6-13.2 25.9V690c0 6.5 7.4 10.3 12.7 6.5l246-178c4.4-3.2 4.4-9.8 0-13z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"right-circle",theme:"outlined"});const w=g;var O=t(57611);function h(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?Object(arguments[a]):{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(a){I(e,a,t[a])}))}return e}function I(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var j=function(e,a){var t=h({},e,a.attrs);return(0,r.Wm)(O.Z,h({},t,{icon:w}),null)};j.displayName="RightCircleOutlined",j.inheritAttrs=!1;const D=j;var P=t(92487),_=t(94638),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"};const H=E;function R(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?Object(arguments[a]):{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(a){C(e,a,t[a])}))}return e}function C(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var q=function(e,a){var t=R({},e,a.attrs);return(0,r.Wm)(O.Z,R({},t,{icon:H}),null)};q.displayName="ArrowRightOutlined",q.inheritAttrs=!1;const T=q;var x=t(74670),W=t(23746);function M(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function U(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?M(Object(t),!0).forEach((function(a){(0,k.Z)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):M(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}const V=(0,r.aZ)({props:{dsData:Object,engineType:String},emits:["updateSourceInfo","updateSinkInfo","updateSourceParams","updateSinkParams"],components:{SelectDataSource:(0,r.RC)((()=>t.e(581).then(t.bind(t,41581)))),DyncRender:(0,r.RC)((()=>t.e(400).then(t.bind(t,86400)))),RightCircleOutlined:D,RightOutlined:P.Z,DownOutlined:_.Z,ArrowRightOutlined:T},setup(e,a){var t=function(e){if("object"!==typeof e)return"";var a=e.type,t=e.db,r=e.table,s=e.ds;return a||t||r||s?[a,s,t,r]:"请点击后选择"},s=(0,x.iH)(t(e.dsData.dataSourceIds.source)),o=(0,x.iH)(t(e.dsData.dataSourceIds.sink)),n=(0,x.iH)(!0),l=(0,x.qj)({dataSourceIds:{source:U({},e.dsData.dataSourceIds.source),sink:U({},e.dsData.dataSourceIds.sink)},params:{sources:[...e.dsData.params.sources],sinks:[...e.dsData.params.sinks]}}),c=(0,x.qj)({}),u=(0,x.qj)({}),i=(0,x.qj)({}),d=(0,x.qj)({});l["params"]["sources"].forEach((e=>{var a=e.key.split(".").pop();c[a]="",u[a]="success"})),l["params"]["sinks"].forEach((e=>{var a=e.key.split(".").pop();i[a]="",d[a]="success"}));var p=(0,r.Fl)((()=>JSON.parse(JSON.stringify(e.dsData))));(0,r.YP)(p,((e,a)=>{var r="string"===typeof e?JSON.parse(e):e;s.value=t(r.dataSourceIds.source),o.value=t(r.dataSourceIds.sink),l.dataSourceIds={source:r.dataSourceIds.source||{},sink:r.dataSourceIds.sink||{}},l.params={sources:r.params.sources||[],sinks:r.params.sinks||[]}}));var f=(0,x.iH)(),y=(r,s)=>{var n=r.split(".");l.dataSourceIds.sink={type:"",id:"",db:"",table:"",ds:""},o.value=t({type:"",id:"",db:"",table:"",ds:""}),l.params.sinks=[],l.dataSourceIds.source.type=n[0],l.dataSourceIds.source.ds=n[1],l.dataSourceIds.source.db=n[2],l.dataSourceIds.source.table=n[3],l.dataSourceIds.source.id=s,(0,W.v)(e.engineType,l.dataSourceIds.source.type,"source").then((e=>{e.uis.forEach(((e,a)=>{!e.value&&e.defaultValue&&(e.value=e.defaultValue)})),l.params.sources=e.uis||[],a.emit("updateSourceInfo",l)}))},b=(r,s)=>{var n=r.split(".");if(n[0]&&"HIVE"!==n[0]&&l.dataSourceIds.source.type&&"HIVE"!==l.dataSourceIds.source.type&&"SQOOP"===e.engineType)return o.value=t({type:n[0],id:"",db:"",table:"",ds:""}),S.Z.error("SQOOP引擎输入/输出数据源必须包含HIVE,请重新选择");l.dataSourceIds.sink.type=n[0],l.dataSourceIds.sink.ds=n[1],l.dataSourceIds.sink.db=n[2],l.dataSourceIds.sink.table=n[3],l.dataSourceIds.sink.id=s,(0,W.v)(e.engineType,l.dataSourceIds.sink.type,"sink").then((e=>{e.uis.forEach((e=>{!e.value&&e.defaultValue&&(e.value=e.defaultValue)})),l.params.sinks=e.uis||[],a.emit("updateSinkInfo",l)}))},v=e=>{var t=l.params.sources.slice(0),r=e.key.split(".").pop();if(e.required&&!e.value)c[r]="请输入".concat(e.label),u[r]="error";else if("REGEX"===e.validateType){var s=new RegExp("".concat(e.validateRange));s.test(e.value)?(c[e.key]="",u[e.key]="success"):(c[e.key]=e.validateMsg,u[e.key]="error")}else c[r]="",u[r]="success";t.forEach((a=>{if(a.field===e.field)return a.value=e.value})),l.params.sources=t,a.emit("updateSourceParams",l)},m=e=>{var t=l.params.sinks.slice(0),r=e.key.split(".").pop();if(e.required&&!e.value)i[r]="请输入".concat(e.label),d[r]="error";else if("REGEX"===e.validateType){var s=new RegExp("".concat(e.validateRange));s.test(e.value)?(i[e.key]="",d[e.key]="success"):(i[e.key]="请正确输入".concat(e.label),d[e.key]="error")}else i[r]="",d[r]="success";t.forEach((a=>{if(a.field===e.field)return a.value=e.value})),l.params.sinks=t,a.emit("updateSinkParams",l)},k=()=>{n.value=!n.value};return{formRef:f,updateSourceInfo:y,updateSinkInfo:b,sourceTitle:s,sinkTitle:o,dataSource:l,updateSourceParams:v,updateSinkParams:m,showInfo:k,isFold:n,sourcesHelpMsg:c,sourcesHelpStatus:u,sinksHelpMsg:i,sinksHelpStatus:d,labelCol:{style:{style:{width:"417px","text-align":"left"}}},wrapperCol:{style:{"text-align":"left"}},styleObject:{width:"400px"}}},watch:{}});var Z=t(53629);const z=(0,Z.Z)(V,[["render",m],["__scopeId","data-v-16adcdf2"]]),A=z}}]);