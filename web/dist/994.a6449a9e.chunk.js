"use strict";(self["webpackChunk_fesjs_template"]=self["webpackChunk_fesjs_template"]||[]).push([[994],{23994:(e,t,a)=>{a.r(t),a.d(t,{default:()=>$});a(74916),a(64765);var i=a(1089),n=a(91706),o=a(72447),s=a.n(o),l=e=>((0,i.dD)("data-v-668c2850"),e=e(),(0,i.Cn)(),e),r={class:"jl-content"},c={class:"formWrap"},d={class:"tabWrap"},p={class:"cardWrap"},g={key:0,class:"emptyTab"},u=l((()=>(0,i._)("div",{class:"void-page-wrap"},[(0,i._)("div",{class:"void-page-main"},[(0,i._)("div",{class:"void-page-main-img"},[(0,i._)("img",{src:s(),alt:"空页面"})]),(0,i._)("div",{class:"void-page-main-title"},[(0,i._)("span",null,"暂时没有离线任务，请先创建一个离线任务")])])],-1))),h=[u],f={class:"pagination-line"},b={class:"cardWrap"},m={key:0,class:"emptyTab"},v=l((()=>(0,i._)("div",{class:"void-page-wrap"},[(0,i._)("div",{class:"void-page-main"},[(0,i._)("div",{class:"void-page-main-img"},[(0,i._)("img",{src:s(),alt:"空页面"})]),(0,i._)("div",{class:"void-page-main-title"},[(0,i._)("span",null,"暂时没有流式任务，请先创建一个流式任务")])])],-1))),y=[v],w={class:"pagination-line"};function J(e,t,a,o,s,l){var u=(0,i.up)("icon-searchOutlined"),v=(0,i.up)("a-input"),J=(0,i.up)("PlusOutlined"),C=(0,i.up)("a-button"),O=(0,i.up)("DownloadOutlined"),j=(0,i.up)("a-upload"),_=(0,i.up)("ApiOutlined"),D=(0,i.up)("job-card"),L=(0,i.up)("a-pagination"),z=(0,i.up)("a-tab-pane"),S=(0,i.up)("NodeIndexOutlined"),W=(0,i.up)("a-tabs"),k=(0,i.up)("a-spin"),x=(0,i.up)("CreateJob");return(0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("div",c,[(0,i.Wm)(v,{placeholder:s.t("job.action.jobSearch"),value:s.search,"onUpdate:value":t[0]||(t[0]=e=>s.search=e),onPressEnter:l.handleSearch,style:{width:"336px"}},{prefix:(0,i.w5)((()=>[(0,i.Wm)(u,{style:{color:"#dee4ec"}})])),_:1},8,["placeholder","value","onPressEnter"]),(0,i._)("div",null,[(0,i.Wm)(C,{type:"primary",style:{width:"106px","margin-left":"8px","font-family":"PingFangSC-Regular","font-size":"14px",color:"#ffffff","line-height":"22px","font-weight":"400"},onClick:l.addJob},{icon:(0,i.w5)((()=>[(0,i.Wm)(J)])),default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(s.t("job.action.createJob")),1)])),_:1},8,["onClick"]),(0,i.Wm)(j,{action:"/api/rest_j/v1/exchangis/job/import",onChange:l.handleImport,showUploadList:!1},{default:(0,i.w5)((()=>[(0,i.Wm)(C,{style:{width:"78px","margin-left":"8px","font-family":"PingFangSC-Regular","font-size":"14px",color:"rgba(0, 0, 0, 0.65)","line-height":"22px","font-weight":"400"}},{icon:(0,i.w5)((()=>[(0,i.Wm)(O)])),default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(s.t("job.action.import")),1)])),_:1})])),_:1},8,["onChange"])])]),(0,i.Wm)(k,{spinning:s.spinning},{default:(0,i.w5)((()=>[(0,i._)("div",d,[(0,i.Wm)(W,{type:"card",activeKey:s.activeKey,"onUpdate:activeKey":t[5]||(t[5]=e=>s.activeKey=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(z,{key:"1"},{tab:(0,i.w5)((()=>[(0,i._)("span",null,[(0,i.Wm)(_),(0,i.Uk)(" "+(0,n.zw)(s.t("job.type.offline")),1)])])),default:(0,i.w5)((()=>[(0,i._)("div",p,[0===s.offlineList.length?((0,i.wg)(),(0,i.iD)("div",g,h)):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.offlineList,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.id,class:"card"},[(0,i.Wm)(D,{jobData:e,type:"OFFLINE",onShowJobDetail:l.showJobDetail,onHandleJobCopy:l.handleJobCopy,onHandleJobModify:l.handleJobModify,onRefreshList:l.getJobs},null,8,["jobData","onShowJobDetail","onHandleJobCopy","onHandleJobModify","onRefreshList"])])))),128)),(0,i._)("div",f,[(0,i.Wm)(L,{current:s.pageCfg.current,"onUpdate:current":t[1]||(t[1]=e=>s.pageCfg.current=e),pageSize:s.pageCfg.size,"onUpdate:pageSize":t[2]||(t[2]=e=>s.pageCfg.size=e),onChange:l.handleChangePage,total:s.total,"show-less-items":""},null,8,["current","pageSize","onChange","total"])])])])),_:1}),(0,i.Wm)(z,{key:"2"},{tab:(0,i.w5)((()=>[(0,i._)("span",null,[(0,i.Wm)(S),(0,i.Uk)(" "+(0,n.zw)(s.t("job.type.stream")),1)])])),default:(0,i.w5)((()=>[(0,i._)("div",b,[0===s.streamList.length?((0,i.wg)(),(0,i.iD)("div",m,y)):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.streamList,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.id,class:"card"},[(0,i.Wm)(D,{jobData:e,type:"STREAM",onShowJobDetail:l.showJobDetail,onHandleJobCopy:l.handleJobCopy,onHandleJobModify:l.handleJobModify,onRefreshList:l.getJobs},null,8,["jobData","onShowJobDetail","onHandleJobCopy","onHandleJobModify","onRefreshList"])])))),128)),(0,i._)("div",w,[(0,i.Wm)(L,{current:s.pageCfg2.current,"onUpdate:current":t[3]||(t[3]=e=>s.pageCfg2.current=e),pageSize:s.pageCfg2.size,"onUpdate:pageSize":t[4]||(t[4]=e=>s.pageCfg2.size=e),onChange:l.handleChangePage,total:s.total2,"show-less-items":""},null,8,["current","pageSize","onChange","total"])])])])),_:1})])),_:1},8,["activeKey"])])])),_:1},8,["spinning"]),(0,i.Wm)(x,{visible:s.visible,editData:s.editJobData,projectId:s.projectId,mode:s.mode,onHandleJobAction:l.handleJobAction},null,8,["visible","editData","projectId","mode","onHandleJobAction"])])}a(86778);var C=a(25318),O=a(15861),j=a(87757),_=a.n(j),D=(a(66992),a(41539),a(88674),a(33948),a(50348)),L=(a(82526),a(92222),a(57327),a(54747),{icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M843.5 737.4c-12.4-75.2-79.2-129.1-155.3-125.4S550.9 676 546 752c-153.5-4.8-208-40.7-199.1-113.7 3.3-27.3 19.8-41.9 50.1-49 18.4-4.3 38.8-4.9 57.3-3.2 1.7.2 3.5.3 5.2.5 11.3 2.7 22.8 5 34.3 6.8 34.1 5.6 68.8 8.4 101.8 6.6 92.8-5 156-45.9 159.2-132.7 3.1-84.1-54.7-143.7-147.9-183.6-29.9-12.8-61.6-22.7-93.3-30.2-14.3-3.4-26.3-5.7-35.2-7.2-7.9-75.9-71.5-133.8-147.8-134.4-76.3-.6-140.9 56.1-150.1 131.9s40 146.3 114.2 163.9c74.2 17.6 149.9-23.3 175.7-95.1 9.4 1.7 18.7 3.6 28 5.8 28.2 6.6 56.4 15.4 82.4 26.6 70.7 30.2 109.3 70.1 107.5 119.9-1.6 44.6-33.6 65.2-96.2 68.6-27.5 1.5-57.6-.9-87.3-5.8-8.3-1.4-15.9-2.8-22.6-4.3-3.9-.8-6.6-1.5-7.8-1.8l-3.1-.6c-2.2-.3-5.9-.8-10.7-1.3-25-2.3-52.1-1.5-78.5 4.6-55.2 12.9-93.9 47.2-101.1 105.8-15.7 126.2 78.6 184.7 276 188.9 29.1 70.4 106.4 107.9 179.6 87 73.3-20.9 119.3-93.4 106.9-168.6zM329.1 345.2a83.3 83.3 0 11.01-166.61 83.3 83.3 0 01-.01 166.61zM695.6 845a83.3 83.3 0 11.01-166.61A83.3 83.3 0 01695.6 845z"}}]},name:"node-index",theme:"outlined"});const z=L;var S=a(57611);function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),i.forEach((function(t){k(e,t,a[t])}))}return e}function k(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var x=function(e,t){var a=W({},e,t.attrs);return(0,i.Wm)(S.Z,W({},a,{icon:z}),null)};x.displayName="NodeIndexOutlined",x.inheritAttrs=!1;const P=x;var I={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M917.7 148.8l-42.4-42.4c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-76.1 76.1a199.27 199.27 0 00-112.1-34.3c-51.2 0-102.4 19.5-141.5 58.6L432.3 308.7a8.03 8.03 0 000 11.3L704 591.7c1.6 1.6 3.6 2.3 5.7 2.3 2 0 4.1-.8 5.7-2.3l101.9-101.9c68.9-69 77-175.7 24.3-253.5l76.1-76.1c3.1-3.2 3.1-8.3 0-11.4zM769.1 441.7l-59.4 59.4-186.8-186.8 59.4-59.4c24.9-24.9 58.1-38.7 93.4-38.7 35.3 0 68.4 13.7 93.4 38.7 24.9 24.9 38.7 58.1 38.7 93.4 0 35.3-13.8 68.4-38.7 93.4zm-190.2 105a8.03 8.03 0 00-11.3 0L501 613.3 410.7 523l66.7-66.7c3.1-3.1 3.1-8.2 0-11.3L441 408.6a8.03 8.03 0 00-11.3 0L363 475.3l-43-43a7.85 7.85 0 00-5.7-2.3c-2 0-4.1.8-5.7 2.3L206.8 534.2c-68.9 69-77 175.7-24.3 253.5l-76.1 76.1a8.03 8.03 0 000 11.3l42.4 42.4c1.6 1.6 3.6 2.3 5.7 2.3s4.1-.8 5.7-2.3l76.1-76.1c33.7 22.9 72.9 34.3 112.1 34.3 51.2 0 102.4-19.5 141.5-58.6l101.9-101.9c3.1-3.1 3.1-8.2 0-11.3l-43-43 66.7-66.7c3.1-3.1 3.1-8.2 0-11.3l-36.6-36.2zM441.7 769.1a131.32 131.32 0 01-93.4 38.7c-35.3 0-68.4-13.7-93.4-38.7a131.32 131.32 0 01-38.7-93.4c0-35.3 13.7-68.4 38.7-93.4l59.4-59.4 186.8 186.8-59.4 59.4z"}}]},name:"api",theme:"outlined"};const M=I;function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),i.forEach((function(t){A(e,t,a[t])}))}return e}function A(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var E=function(e,t){var a=F({},e,t.attrs);return(0,i.Wm)(S.Z,F({},a,{icon:M}),null)};E.displayName="ApiOutlined",E.inheritAttrs=!1;const U=E;var H=a(63467),K=a(92052),N=a(36159),R=a(23746);const T={components:{DownloadOutlined:D.Z,NodeIndexOutlined:P,ApiOutlined:U,PlusOutlined:H.Z,CreateJob:(0,i.RC)((()=>a.e(910).then(a.bind(a,95910)))),JobCard:(0,i.RC)((()=>a.e(266).then(a.bind(a,84266)))),iconSearchOutlined:K.Z},data(){var e=(0,N.QT)({useScope:"global"}),t=e.t;return{t,search:"",userName:"safdsaf",activeKey:"1",visible:!1,loading:!1,editJobData:{},offlineList:[],streamList:[],offlineListOrigin:[],streamListOrigin:[],projectId:this.$route.query.id,spinning:!1,mode:"create",pageCfg:{current:1,size:10},pageCfg2:{current:1,size:10},total:0,total2:0}},mounted(){this.getJobs("OFFLINE"),this.getJobs("STREAM")},methods:{getJobs(e){var t=arguments,a=this;return(0,O.Z)(_().mark((function i(){var n,o,s,l,r;return _().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=t.length>1&&void 0!==t[1]?t[1]:1,o=t.length>2&&void 0!==t[2]?t[2]:10,a.spinning=!0,i.next=5,(0,R.Ly)(a.projectId,e,a.search,n,o);case 5:s=i.sent,l=s.result,r=s.total,a.spinning=!1,"OFFLINE"===e?(a.pageCfg.current=n,a.offlineList=l,a.offlineListOrigin=l,a.total=r):(a.pageCfg2.current=n,a.streamList=l,a.streamListOrigin=l,a.total2=r);case 10:case"end":return i.stop()}}),i)})))()},handleSearch(){this.handleChangePage(1)},addJob(){this.mode="create",this.visible=!0,this.editJobData={}},handleJobAction(e){if(this.visible=!1,this.editJobData={},e){var t="OFFLINE"===e.jobType?"1":"2";t!==this.activeKey&&(this.activeKey=t),this.getJobs(e.jobType)}this.$emit("changeType")},handleJobCopy(e){this.mode="copy",this.visible=!0,this.editJobData=e},handleJobModify(e){this.mode="modify",this.visible=!0,this.editJobData=e},showJobDetail(e){console.log(e),this.$emit("showJobDetail",e)},handleImport(e){"uploading"!==e.file.status&&console.log(e.file),"done"===e.file.status?(C.Z.success(this.t("job.action.fileUpSuccess")),this.getJobs("OFFLINE"),this.getJobs("STREAM")):"error"===e.file.status&&C.Z.error(this.t("job.action.fileUpFailed"))},handleChangePage(e){1==this.activeKey?(this.pageCfg.current=e,this.getJobs("OFFLINE",e,this.pageCfg.size)):(this.pageCfg2.current=e,this.getJobs("STREAM",e,this.pageCfg2.size))}},watch:{activeKey:{handler:function(e){console.log(e)},deep:!0}}};var Z=a(53629);const q=(0,Z.Z)(T,[["render",J],["__scopeId","data-v-668c2850"]]),$=q}}]);