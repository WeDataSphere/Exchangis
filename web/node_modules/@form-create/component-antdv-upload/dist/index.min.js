/*!
 * @form-create/component-antdv-upload v3.1.3
 * (c) 2018-2022 xaboy
 * Github https://github.com/xaboy/form-create with upload
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).FcUpload={},e.Vue)}(this,(function(e,t){"use strict";function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l={name:"PlusOutlined"},u={class:"anticon"},a=[t.createElementVNode("svg",{height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[t.createElementVNode("defs"),t.createElementVNode("path",{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z",fill:"currentColor"}),t.createElementVNode("path",{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z",fill:"currentColor"})],-1)];l.render=function(e,r,n,i,o,l){return t.openBlock(),t.createElementBlock("span",u,a)};var s=function(e,t){return{url:e,name:c(e),status:"done",uid:t+1}},c=function(e){return(t=e,null==t?"":"object"===i(t)?JSON.stringify(t,null,2):String(t)).split("/").pop();var t},p=function(e){return{url:e.url,file:e}},f=t.defineComponent({name:"fcUpload",inheritAttrs:!1,formCreateParser:{toFormValue:function(e){return function(e){return Array.isArray(e)?e:[null,void 0,""].indexOf(e)>-1?[]:[e]}(e)},toValue:function(e,t){return 1===t.prop.props.limit?e[0]||"":e}},props:{limit:{type:Number,default:0},modelValue:{type:Array,default:function(){return[]}},onSuccess:{type:Function,required:!0},onPreview:Function,modalTitle:String,previewMask:void 0},emits:["update:modelValue","change"],data:function(){var e=this.modelValue.map(s);return{defaultUploadList:e,previewImage:"",previewVisible:!1,uploadList:e.map(p)}},watch:{modelValue:function(e){var t=e.map(s);this.$refs.upload.sFileList=t,this.uploadList=t.map(p)}},methods:{handlePreview:function(e){this.onPreview?this.onPreview.apply(this,arguments):(this.previewImage=e.url,this.previewVisible=!0)},handleChange:function(e){var t=e.file,r=e.fileList;this.$emit.apply(this,["change"].concat(Array.prototype.slice.call(arguments)));var n=this.uploadList;"done"===t.status?(this.onSuccess(t,r),t.url&&n.push({url:t.url,file:r[r.length-1]}),this.input()):"removed"===t.status&&(n.forEach((function(e,r){e.file===t&&n.splice(r,1)})),this.input())},input:function(){this.$emit("update:modelValue",this.uploadList.map((function(e){return e.url})))}},render:function(){var e,r,i,o,u=this,a=!this.limit||this.limit>this.uploadList.length;return t.createVNode(t.Fragment,null,[t.createVNode(t.resolveComponent("AUpload"),t.mergeProps({"list-type":"picture-card"},this.$attrs,{onPreview:this.handlePreview,onChange:this.handleChange,ref:"upload",defaultFileList:this.defaultUploadList}),n({default:function(){return[a?(null===(e=(r=u.$slots).default)||void 0===e?void 0:e.call(r))||t.createVNode(l,{style:"font-size: 16px; width: 16px;"},null):null]}},(i=this.$slots,o=["default"],Object.keys(i).reduce((function(e,t){return o&&-1!==o.indexOf(t)||e.push(i[t]),e}),[])))),t.createVNode(t.resolveComponent("aModal"),{mask:this.previewMask,title:this.modalTitle,visible:this.previewVisible,onCancel:function(){return u.previewVisible=!1},footer:null},{default:function(){return[t.createVNode("img",{style:"width: 100%",src:u.previewImage},null)]}})])}});e.default=f,Object.defineProperty(e,"__esModule",{value:!0})}));
